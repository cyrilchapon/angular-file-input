(function(){"use strict";angular.module("angularFileInput",[]).directive("ngFileInput",["$compile","$http","$templateCache","$parse",function(e,t,a,n){return{restrict:"E",require:"?ngModel",scope:{callback:"&",mode:"@",tmpl:"="},template:'<input ng-hide="tmpl" type="file" />',link:function(n,i,r,l){function c(e){var t=e.split("data:")[1],a=t.split(";"),n=a[0]||"text/plain",i=a[1].split(","),r=i[0],l=i[1];return{mimetype:n,encoding:r,content:l}}function p(e){var t=e.target.files[0];if(t){var a=new FileReader;a.onload=function(e){var a=e.target.result,i={};"data-url"==n.mode?i=c(a):i.content=a,i.name=t.name,i.size=t.size,n.content=i,n.callback({file:i}),l&&l.$setViewValue(i),n.$apply()},n.mode||(n.mode="data-url"),a["readAs"+d[n.mode]]&&a["readAs"+d[n.mode]](t)}}var u=i.find("input"),o=u[0];r.accept&&u.attr("accept",r.accept);var d={"array-buffer":"ArrayBuffer","binary-string":"BinaryString","data-url":"DataURL",text:"Text"};o.addEventListener("change",p,!1),n.tmpl&&t.get(n.tmpl,{cache:a}).then(function(t){var a=t.data,r=angular.element(a);r[0].onclick=function(){o.click()},e(r)(n),i.append(r)})}}}])}).call(this);